<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Brandon's Big Board</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<style>
body{
  background:black;
  color:white;
  font-family:Arial, sans-serif;
  margin:0;
}

/* HERO */
.hero-banner{
  background:linear-gradient(135deg,#0a0a0a,#1a1a1a);
  border-top:1px solid #222;
  border-bottom:1px solid #222;
  padding:30px 20px;
  text-align:center;
}

.hero-content h1{
  font-size:36px;
  margin:0;
  letter-spacing:2px;
  font-weight:700;
}

.hero-content h2{
  font-size:22px;
  margin:10px 0;
  color:#4169E1;
  font-weight:600;
}

.meta-info{
  margin-top:12px;
  font-size:15px;
  color:#ccc;
}

/* LOGOS */
.top-logos{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:80px;
  padding:40px 0 20px 0;
}

.top-logos img{
  height:285px;
  object-fit:contain;
}

/* FILTER BAR */
.filter-bar{
  display:flex;
  justify-content:center;
  gap:20px;
  padding:20px;
}

.filter-bar input,
.filter-bar select{
  padding:8px 12px;
  font-size:14px;
  border-radius:4px;
  border:1px solid #333;
  background:#111;
  color:white;
}

/* TABLE */
.table-wrapper{
  overflow:auto;
  max-height:75vh;
  margin:20px;
}

table{
  border-collapse:separate;
  border-spacing:0;
  width:100%;
  min-width:max-content;
  table-layout:fixed;
}

th, td{
  padding:8px 14px;
  text-align:center;
  white-space:nowrap;
}

/* HEADER */
th{
  background:#4169E1;
  cursor:pointer;
  position:sticky;
  top:0;
  z-index:1000;
  transition:background .2s ease;
}

th:hover{
  background:#3157c7;
}

th .arrow{
  margin-left:6px;
  font-weight:bold;
}

/* Active header */
th.sorted{
  background:#162b55 !important;
}

/* Active column highlight */
.active-col{
  background:#1c1c1c !important;
}

/* COLUMN WIDTHS */
th:nth-child(1), td:nth-child(1){ width:90px; min-width:90px; }
th:nth-child(2), td:nth-child(2){ width:90px; min-width:90px; }
th:nth-child(3), td:nth-child(3){ width:320px; min-width:320px; text-align:left; }

/* STICKY */
td:nth-child(1){ position:sticky; left:0; background:#000; z-index:900; }
td:nth-child(2){ position:sticky; left:90px; background:#000; z-index:901; }
td:nth-child(3){ position:sticky; left:180px; background:#000; z-index:902; }

th:nth-child(1){ left:0; }
th:nth-child(2){ left:90px; }
th:nth-child(3){ left:180px; }

/* STRIPING */
tbody tr:nth-child(even){ background:#111; }

/* POSITION COLORS */
.edge-row td { color:orange; font-weight:600; }
.dt-row td { color:#40e0d0; font-weight:600; }
.cb-row td { color:red; font-weight:600; }
.s-row td { color:#ff1493; font-weight:600; }
.te-row td { color:purple; font-weight:600; }
.rb-row td { color:#006400; font-weight:600; }
.wr-row td { color:#b8860b; font-weight:600; }
.lb-row td { color:#4169E1; font-weight:600; }
.ot-row td { color:yellow; font-weight:600; }
.iol-row td { color:#00ff00; font-weight:600; }

.school-logo{
  height:22px;
}
</style>
</head>

<body>

<div class="hero-banner">
  <div class="hero-content">
    <h1>Brandon's Big Board 2026</h1>
    <h2>2026 NFL Draft Database</h2>
    <div class="meta-info">
      Prospects: <span id="prospectCount">Loading...</span>
    </div>
  </div>
</div>

<div class="top-logos">
  <img src="comby.png">
  <img src="NFLLogo.png">
  <img src="Draft26.jpg">
</div>

<div class="filter-bar">
  <input type="text" id="searchInput" placeholder="Search players...">
  <select id="positionFilter">
    <option value="">All Positions</option>
  </select>
</div>

<div class="table-wrapper">
<table id="data-table">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<script>

const csvUrl="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ0uaGV-62aAS74y5I-HVKCtGd8l5vy0iaNOErDHjQBFXNt2kDKhAEUMRQDGckqQoJqjUtwnKqTWqgR/pub?gid=0&single=true&output=csv";

let originalData=[], filteredData=[], headers=[];
let posIndex=-1, schoolIndex=-1;
let currentSort=-1, sortAsc=true;

Papa.parse(csvUrl,{
  download:true,
  skipEmptyLines:true,
  complete:function(results){

    headers=results.data[1].map(h=>h.trim());
    originalData=results.data.slice(2).filter(r=>r.length===headers.length);
    filteredData=[...originalData];

    document.getElementById("prospectCount").textContent=originalData.length;

    posIndex=headers.findIndex(h=>h.toLowerCase().includes("pos"));
    schoolIndex=headers.findIndex(h=>h.toLowerCase().includes("school"));

    populatePositions();
    createHeaders();
    applyFilters();

    const fortyIndex=headers.findIndex(h=>h.toLowerCase().includes("40"));
    if(fortyIndex!==-1){
      sortAsc=true;
      sortTable(fortyIndex);
    }
  }
});

function populatePositions(){
  const select=document.getElementById("positionFilter");
  const positions=[...new Set(originalData.map(r=>r[posIndex]))].sort();
  positions.forEach(p=>{
    const opt=document.createElement("option");
    opt.value=p;
    opt.textContent=p;
    select.appendChild(opt);
  });
}

function createHeaders(){
  const thead=document.querySelector("#data-table thead");
  const row=document.createElement("tr");

  headers.forEach((h,i)=>{
    const th=document.createElement("th");
    th.innerHTML=h+' <span class="arrow"></span>';
    th.onclick=()=>sortTable(i);
    row.appendChild(th);
  });

  thead.appendChild(row);
}

function displayRows(){
  const tbody=document.querySelector("#data-table tbody");
  tbody.innerHTML="";

  filteredData.forEach(r=>{
    const tr=document.createElement("tr");

    if(posIndex>=0){
      tr.classList.add(r[posIndex].toLowerCase()+"-row");
    }

    r.forEach((c,i)=>{
      const td=document.createElement("td");
      td.textContent=c;
      if(currentSort===i) td.classList.add("active-col");
      tr.appendChild(td);
    });

    tbody.appendChild(tr);
  });

  document.getElementById("prospectCount").textContent=filteredData.length;
}

function applyFilters(){
  const search=document.getElementById("searchInput").value.toLowerCase();
  const pos=document.getElementById("positionFilter").value;

  filteredData=originalData.filter(r=>{
    return r.join(" ").toLowerCase().includes(search) &&
           (!pos || r[posIndex]===pos);
  });

  if(currentSort!==-1) sortTable(currentSort,false);
  else displayRows();
}

function parseValue(val){
  if(!val) return 0;
  if(val.includes("'")){
    const parts=val.split("'");
    return parseInt(parts[0])*12+parseInt(parts[1]);
  }
  const num=parseFloat(val);
  if(!isNaN(num)) return num;
  return val.toLowerCase();
}

function sortTable(col,toggle=true){

  if(toggle){
    if(currentSort===col) sortAsc=!sortAsc;
    else{
      sortAsc=true;
      currentSort=col;
    }
  }

  filteredData.sort((a,b)=>{
    const v1=parseValue(a[col]);
    const v2=parseValue(b[col]);
    if(v1<v2) return sortAsc?-1:1;
    if(v1>v2) return sortAsc?1:-1;
    return 0;
  });

  document.querySelectorAll("th").forEach((th,i)=>{
    th.classList.remove("sorted");
    th.querySelector(".arrow").textContent="";
  });

  const activeTh=document.querySelectorAll("th")[col];
  activeTh.classList.add("sorted");
  activeTh.querySelector(".arrow").textContent=sortAsc?"▲":"▼";

  displayRows();
}

document.getElementById("searchInput").addEventListener("input",applyFilters);
document.getElementById("positionFilter").addEventListener("change",applyFilters);

</script>

</body>
</html>
