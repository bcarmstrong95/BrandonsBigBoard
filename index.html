<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Brandon's Big Board</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<style>
body{
  background:black;
  color:white;
  font-family:Arial, sans-serif;
  margin:20px;
}

/* HERO */
.hero-banner{
  background:linear-gradient(135deg,#0a0a0a,#1a1a1a);
  border:1px solid #222;
  padding:40px 20px;
  margin-bottom:30px;
  text-align:center;
}

.hero-content h1{
  font-size:36px;
  margin:0;
  letter-spacing:2px;
  font-weight:700;
}

.hero-content h2{
  font-size:22px;
  margin:10px 0;
  color:#4169E1;
  font-weight:600;
}

.meta-info{
  margin-top:12px;
  font-size:13px;
  color:#ccc;
}

/* CONTROLS */
.controls{
  text-align:center;
  margin-bottom:15px;
}

input, select{
  padding:6px;
  margin:5px;
  font-size:14px;
  background:#111;
  color:white;
  border:1px solid #444;
}

/* TABLE */
.table-wrapper{
  overflow:auto;
  max-height:75vh;
  border:1px solid #222;
}

table{
  border-collapse:separate;
  border-spacing:0;
  width:100%;
  min-width:max-content;
  table-layout:fixed;
}

th, td{
  padding:8px 14px;
  text-align:center;
  white-space:nowrap;
}

/* HEADER */
th{
  background:#4169E1;
  cursor:pointer;
  position:sticky;
  top:0;
  z-index:1000;
  transition:background .2s ease;
}

th:hover{
  background:#3157c7;
}

th .arrow{
  display:inline-block;
  margin-left:6px;
  opacity:0;
  transition:transform .25s ease, opacity .2s ease;
}

th.sorted .arrow{ opacity:1; }
th.sorted.desc .arrow{ transform:rotate(180deg); }

.sorted-column{
  background:#162b55 !important;
}

/* Sticky Columns */
th:nth-child(1), td:nth-child(1){ width:140px; min-width:140px; }
th:nth-child(2), td:nth-child(2){ width:90px; min-width:90px; }
th:nth-child(3), td:nth-child(3){ width:110px; min-width:110px; }

td:nth-child(1){ position:sticky; left:0; z-index:900; background:#000; }
td:nth-child(2){ position:sticky; left:140px; z-index:901; background:#000; }
td:nth-child(3){ position:sticky; left:230px; z-index:902; background:#000; box-shadow:6px 0 10px rgba(0,0,0,.7); }

th:nth-child(1){ left:0; z-index:1100; }
th:nth-child(2){ left:140px; z-index:1099; }
th:nth-child(3){ left:230px; z-index:1098; }

/* Row striping */
tbody tr:nth-child(odd){ background:#000; }
tbody tr:nth-child(even){ background:#111; }
tbody tr:hover{ background:#1a1a1a; }

tbody tr:nth-child(even) td:nth-child(-n+3){ background:#111; }
tbody tr:hover td:nth-child(-n+3){ background:#1a1a1a; }

/* POSITION COLORS */
.edge-row td { color:#ff8c00; font-weight:600; }
.dt-row td { color:#40e0d0; font-weight:600; }
.cb-row td { color:#ff0000; font-weight:600; }
.s-row td { color:#ff1493; font-weight:600; }
.te-row td { color:#800080; font-weight:600; }
.rb-row td { color:#006400; font-weight:600; }
.wr-row td { color:#b8860b; font-weight:600; }
.lb-row td { color:#4169E1; font-weight:600; }
.ot-row td { color:#ffff00; font-weight:600; }
.iol-row td { color:#00ff00; font-weight:600; }

.school-logo{
  height:24px;
  vertical-align:middle;
  margin-right:6px;
}
</style>
</head>

<body>

<div class="hero-banner">
  <div class="hero-content">
    <h1>Brandon's Big Board 2026</h1>
    <h2>2026 NFL Draft Database</h2>
    <div class="meta-info">
      <span id="prospectCount">Prospects: --</span>
    </div>
  </div>
</div>

<div class="controls">
  <input type="text" id="searchBox" placeholder="Search players...">
  <select id="positionFilter">
    <option value="ALL">All Positions</option>
  </select>
</div>

<div class="table-wrapper">
<table id="data-table">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<script>

const csvUrl = "YOUR_CSV_LINK_HERE";

let originalData=[];
let filteredData=[];
let headers=[];
let posIndex=-1;
let schoolIndex=-1;
let currentSort=-1;
let sortAsc=true;

Papa.parse(csvUrl,{
  download:true,
  skipEmptyLines:true,
  complete:function(results){

    headers = results.data[1].map(h=>h.trim());
    originalData = results.data.slice(2).filter(r=>r.length===headers.length);
    filteredData = [...originalData];

    posIndex = headers.findIndex(h=>h.toLowerCase().includes("pos"));
    schoolIndex = headers.findIndex(h=>h.toLowerCase().includes("school"));

    createHeaders();
    populateFilter();
    displayRows();

    // AUTO SORT 40 TIME LOWEST FIRST
    const fortyIndex = headers.findIndex(h => h.toLowerCase().includes("40"));
    if(fortyIndex !== -1){
      sortTable(fortyIndex);
    }
  }
});

function createHeaders(){
  const row=document.createElement("tr");
  headers.forEach((h,i)=>{
    const th=document.createElement("th");
    th.innerHTML = h + '<span class="arrow">â–²</span>';
    th.onclick=()=>sortTable(i);
    row.appendChild(th);
  });
  document.querySelector("#data-table thead").appendChild(row);
}

function populateFilter(){
  if(posIndex===-1) return;
  const select=document.getElementById("positionFilter");
  const positions=[...new Set(originalData.map(r=>r[posIndex]))];
  positions.sort().forEach(p=>{
    const option=document.createElement("option");
    option.value=p;
    option.textContent=p;
    select.appendChild(option);
  });
}

function applyFilters(){
  const search=document.getElementById("searchBox").value.toLowerCase();
  const position=document.getElementById("positionFilter").value;

  filteredData=originalData.filter(row=>{
    const matchesSearch=row.some(cell=>cell.toLowerCase().includes(search));
    const matchesPosition=(position==="ALL" || row[posIndex]===position);
    return matchesSearch && matchesPosition;
  });

  displayRows();
}

function sortTable(index){

  if(currentSort === index){
    sortAsc = !sortAsc;
  } else {
    currentSort = index;
    sortAsc = true;
  }

  filteredData.sort((a,b)=>{

    let valA = a[index] ? a[index].toString().trim() : "";
    let valB = b[index] ? b[index].toString().trim() : "";

    const heightRegex = /^\d+'\d+(\.\d+)?"$/;

    if(heightRegex.test(valA) && heightRegex.test(valB)){
      const convert = h => {
        const parts = h.match(/(\d+)'(\d+(\.\d+)?)"/);
        return parseFloat(parts[1]) * 12 + parseFloat(parts[2]);
      };
      valA = convert(valA);
      valB = convert(valB);
    }

    else if(!isNaN(parseFloat(valA.replace(/[^\d.-]/g,''))) &&
            !isNaN(parseFloat(valB.replace(/[^\d.-]/g,'')))){

      valA = parseFloat(valA.replace(/[^\d.-]/g,''));
      valB = parseFloat(valB.replace(/[^\d.-]/g,''));
    }

    else{
      valA = valA.toLowerCase();
      valB = valB.toLowerCase();
    }

    if(valA < valB) return sortAsc ? -1 : 1;
    if(valA > valB) return sortAsc ? 1 : -1;
    return 0;
  });

  document.querySelectorAll("th").forEach(th=>{
    th.classList.remove("sorted","desc");
  });

  const active = document.querySelectorAll("th")[currentSort];
  active.classList.add("sorted");
  if(!sortAsc) active.classList.add("desc");

  displayRows();
}

function displayRows(){
  const tbody=document.querySelector("#data-table tbody");
  tbody.innerHTML="";
  let count=0;

  filteredData.forEach(r=>{
    count++;
    const tr=document.createElement("tr");

    if(posIndex!==-1){
      const p=r[posIndex];
      if(p==="EDGE") tr.classList.add("edge-row");
      if(p==="DT") tr.classList.add("dt-row");
      if(p==="CB") tr.classList.add("cb-row");
      if(p==="S") tr.classList.add("s-row");
      if(p==="TE") tr.classList.add("te-row");
      if(p==="RB") tr.classList.add("rb-row");
      if(p==="WR") tr.classList.add("wr-row");
      if(p==="LB") tr.classList.add("lb-row");
      if(p==="OT") tr.classList.add("ot-row");
      if(p==="IOL") tr.classList.add("iol-row");
    }

    r.forEach((c,i)=>{
      const td=document.createElement("td");

      if(i===schoolIndex && c==="Alabama"){
        td.innerHTML='<img src="bama.svg" class="school-logo">';
      } else {
        td.textContent=c;
      }

      if(i===currentSort) td.classList.add("sorted-column");

      tr.appendChild(td);
    });

    tbody.appendChild(tr);
  });

  document.getElementById("prospectCount").textContent="Prospects: "+count;
}

document.getElementById("searchBox").addEventListener("input", applyFilters);
document.getElementById("positionFilter").addEventListener("change", applyFilters);

</script>

</body>
</html>
