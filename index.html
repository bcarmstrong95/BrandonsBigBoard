<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Brandon's Big Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<style>
/* ---- YOUR ORIGINAL STYLES UNCHANGED ---- */
body{background:black;color:white;font-family:Arial;margin:0;}
.hero-banner{background:linear-gradient(135deg,#0a0a0a,#1a0a0a);border-top:1px solid #222;border-bottom:1px solid #222;padding:30px 20px;text-align:center;}
.hero-content h1{font-size:36px;margin:0;letter-spacing:2px;font-weight:700;}
.hero-content h2{font-size:22px;margin:10px 0;color:#4169E1;font-weight:600;}
.meta-info{margin-top:12px;font-size:15px;color:#ccc;}
.top-logos{display:flex;justify-content:center;align-items:center;gap:80px;padding:40px 0 20px 0;}
.top-logos img{height:285px;object-fit:contain;}
.filter-bar{display:flex;justify-content:center;gap:20px;padding:20px;}
.filter-bar input,.filter-bar select{padding:8px 12px;font-size:14px;border-radius:4px;border:1px solid #333;background:#111;color:white;}
.table-wrapper{overflow:auto;max-height:75vh;margin:20px;}
table{border-collapse:separate;border-spacing:0;width:100%;min-width:max-content;table-layout:auto;}
th,td{padding:8px 14px;text-align:center;white-space:nowrap;}
th{background:#4169E1;cursor:pointer;position:sticky;top:0;z-index:1000;user-select:none;}
th .arrow{margin-left:6px;font-weight:bold;}
th.sorted{background:#162b55!important;}
.active-col{background:#1c1c1c!important;}
.school-logo{height:70px;width:70px;object-fit:contain;vertical-align:middle;}
.logo-michigan,.logo-osu{height:49px;width:49px;}
.logo-bama{height:42px;width:42px;}
</style>
</head>

<body>

<div class="hero-banner">
<h1>Brandon's Big Board 2026</h1>
<h2>2026 NFL Draft Database</h2>
<div class="meta-info">Prospects: <span id="prospectCount">Loading...</span></div>
</div>

<div class="top-logos">
<img src="comby.png">
<img src="NFLLogo.png">
<img src="Draft26.jpg">
</div>

<div class="table-wrapper">
<table id="data-table">
<thead></thead>
<tbody></tbody>
</table>
</div>

<script>
const csvUrl="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ0uaGV-62aAS74y5I-HVKCtGd8l5vy0iaNOErDHjQBFXNt2kDKhAEUMRQDGckqQoJqjUtwnKqTWqgR/pub?gid=0&single=true&output=csv";

let headers=[], originalData=[], filteredData=[];
let currentSort=-1, sortAsc=true;

/* ---------- FRACTION CONVERSION ---------- */

function decimalToFraction(value){
    if(!value || value==="-" || isNaN(value)) return value;
    const num=parseFloat(value);
    const whole=Math.floor(num);
    const frac=num-whole;
    if(frac===0) return whole.toString();

    const denominators=[2,4,8,16];
    for(let d of denominators){
        let n=Math.round(frac*d);
        if(Math.abs(frac - n/d) < 0.02){
            return whole+" "+n+"/"+d;
        }
    }
    return value;
}

function parseMeasurement(val){
    if(!val || val==="-" ) return null;

    // Height like 6'2 3/8
    if(val.includes("'")){
        let parts=val.split("'");
        let feet=parseFloat(parts[0]);
        let inches=parts[1].trim();

        let total=feet*12;

        if(inches.includes("/")){
            let iParts=inches.split(" ");
            let whole=parseFloat(iParts[0])||0;
            let frac=0;
            if(iParts[1]){
                let f=iParts[1].split("/");
                frac=parseFloat(f[0])/parseFloat(f[1]);
            }
            total+=whole+frac;
        }else{
            total+=parseFloat(inches);
        }
        return total;
    }

    // Fraction only
    if(val.includes("/")){
        let f=val.split("/");
        return parseFloat(f[0])/parseFloat(f[1]);
    }

    return parseFloat(val);
}

/* ---------- LOAD CSV ---------- */

Papa.parse(csvUrl,{
download:true,
skipEmptyLines:true,
complete:function(results){
headers=results.data[1].map(h=>h.trim());
originalData=results.data.slice(2).filter(r=>r.length===headers.length);

// convert decimals to fractions visually
originalData.forEach(row=>{
headers.forEach((h,i)=>{
let lower=h.toLowerCase();
if(["height","hand","arm","wingspan"].includes(lower)){
if(!row[i].includes("/") && !row[i].includes("'")){
row[i]=decimalToFraction(row[i]);
}
}
});
});

filteredData=[...originalData];
createHeaders();
displayRows();
document.getElementById("prospectCount").textContent=originalData.length;
}
});

/* ---------- SORT ---------- */

function sortTable(col){
if(currentSort===col){ sortAsc=!sortAsc; }
else{ currentSort=col; sortAsc=true; }

filteredData.sort((a,b)=>{
let header=headers[col].toLowerCase();

if(header==="school"){
return sortAsc
? a[col].localeCompare(b[col])
: b[col].localeCompare(a[col]);
}

if(["height","hand","arm","wingspan"].includes(header)){
let v1=parseMeasurement(a[col]);
let v2=parseMeasurement(b[col]);
if(v1===null) return 1;
if(v2===null) return -1;
return sortAsc ? v1-v2 : v2-v1;
}

let n1=parseFloat(a[col]);
let n2=parseFloat(b[col]);
if(!isNaN(n1) && !isNaN(n2)){
return sortAsc ? n1-n2 : n2-n1;
}

return sortAsc
? a[col].localeCompare(b[col])
: b[col].localeCompare(a[col]);
});

document.querySelectorAll("th").forEach(th=>{
th.classList.remove("sorted");
th.querySelector(".arrow").textContent="";
});

const active=document.querySelectorAll("th")[col];
active.classList.add("sorted");
active.querySelector(".arrow").textContent=sortAsc?"▲":"▼";

displayRows();
}

/* ---------- RENDER ---------- */

function displayRows(){
const tbody=document.querySelector("#data-table tbody");
tbody.innerHTML="";
filteredData.forEach(r=>{
const tr=document.createElement("tr");
r.forEach((c,i)=>{
const td=document.createElement("td");
td.textContent=c;
if(i===currentSort) td.classList.add("active-col");
tr.appendChild(td);
});
tbody.appendChild(tr);
});
}

function createHeaders(){
const thead=document.querySelector("#data-table thead");
const row=document.createElement("tr");
headers.forEach((h,i)=>{
const th=document.createElement("th");
th.innerHTML=h+' <span class="arrow"></span>';
th.addEventListener("click",()=>sortTable(i));
row.appendChild(th);
});
thead.appendChild(row);
}
</script>

</body>
</html>
