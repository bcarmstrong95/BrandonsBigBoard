<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Brandon's Big Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<style>
body{
  background:black;
  color:white;
  font-family:Arial, sans-serif;
  margin:0;
}

.hero-banner{
  background:linear-gradient(135deg,#0a0a0a,#1a0a0a);
  border-top:1px solid #222;
  border-bottom:1px solid #222;
  padding:30px 20px;
  text-align:center;
}

.hero-content h1{
  font-size:36px;
  margin:0;
  letter-spacing:2px;
  font-weight:700;
}

.hero-content h2{
  font-size:22px;
  margin:10px 0;
  color:#4169E1;
  font-weight:600;
}

.meta-info{
  margin-top:12px;
  font-size:15px;
  color:#ccc;
}

.top-logos{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:80px;
  padding:40px 0 20px 0;
}

.top-logos img{
  height:285px;
  object-fit:contain;
}

.filter-bar{
  display:flex;
  justify-content:center;
  gap:20px;
  padding:20px;
}

.filter-bar input,
.filter-bar select{
  padding:8px 12px;
  font-size:14px;
  border-radius:4px;
  border:1px solid #333;
  background:#111;
  color:white;
}

.table-wrapper{
  overflow:auto;
  max-height:75vh;
  margin:20px;
}

table{
  border-collapse:separate;
  border-spacing:0;
  width:100%;
  min-width:max-content;
  table-layout:auto;
}

th, td{
  padding:8px 14px;
  text-align:center;
  white-space:nowrap;
}

th{
  background:#4169E1;
  cursor:pointer;
  position:sticky;
  top:0;
  z-index:1000;
  user-select:none;
}

th .arrow{
  margin-left:6px;
  font-weight:bold;
}

th.sorted{
  background:#162b55 !important;
}

.active-col{
  background:#1c1c1c !important;
}

th:nth-child(1), td:nth-child(1){ width:90px; }
th:nth-child(2), td:nth-child(2){ width:90px; }

th:nth-child(3), td:nth-child(3){
  text-align:left;
}

td:nth-child(1){ position:sticky; left:0; background:#000; z-index:5; }
td:nth-child(2){ position:sticky; left:90px; background:#000; z-index:5; }
td:nth-child(3){ position:sticky; left:180px; background:#000; z-index:5; }

.school-logo{
  height:70px;
  width:70px;
  object-fit:contain;
  vertical-align:middle;
}

.logo-michigan,
.logo-osu{
  height:49px;
  width:49px;
}

.logo-bama{
  height:42px;
  width:42px;
}

.pos-light { background:#111; }
.pos-dark  { background:#1a1a1a; }

@media (max-width: 768px){
  .top-logos{
    flex-direction:row !important;
    justify-content:center;
    gap:20px;
  }

  .top-logos img{
    height:70px !important;
  }

  .filter-bar{
    flex-direction:column;
    align-items:center;
  }

  .table-wrapper{
    overflow-x:auto;
    overflow-y:auto;
    max-height:none;
    margin:10px;
  }

  table{
    table-layout:auto !important;
    width:auto !important;
    min-width:900px !important;
  }

  th, td{
    position:static !important;
    min-width:120px !important;
  }
}
</style>
</head>

<body>

<div class="hero-banner">
  <div class="hero-content">
    <h1>Brandon's Big Board 2026</h1>
    <h2>2026 NFL Draft Database</h2>
    <div class="meta-info">
      Prospects: <span id="prospectCount">Loading...</span>
    </div>
  </div>
</div>

<div class="top-logos">
  <img src="comby.png">
  <img src="NFLLogo.png">
  <img src="Draft26.jpg">
</div>

<div class="filter-bar">
  <input type="text" id="searchInput" placeholder="Search players...">
  <select id="positionFilter">
    <option value="">All Positions</option>
  </select>
</div>

<div class="table-wrapper">
<table id="data-table">
  <thead></thead>
  <tbody></tbody>
</table>
</div>

<script>
const csvUrl="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ0uaGV-62aAS74y5I-HVKCtGd8l5vy0iaNOErDHjQBFXNt2kDKhAEUMRQDGckqQoJqjUtwnKqTWqgR/pub?gid=0&single=true&output=csv";

let originalData=[], filteredData=[], headers=[];
let currentSort=-1, sortAsc=true;

const highFirstColumns = [
"height","weight","arm","hand","wingspan",
"vertical","broad","pfn","pff","nfldb","avg",
"gp","gs","sacks","s/g","tfl","tfl/g",
"tackles","t/g","pde","ints","int/g",
"ff","ff/g","rec.","rec. yards","ry/g",
"td","car","rush yards","ry/c","ry/g"
];

const schoolLogos={
  "Michigan":{src:"michigan.png", class:"logo-michigan"},
  "Ohio St.":{src:"osu1.png", class:"logo-osu"},
  "Alabama":{src:"bama.svg", class:"logo-bama"},
  "Indiana":{src:"iu1.png", class:""},
  "LSU":{src:"lsu2.png", class:""},
  "Iowa":{src:"iowa2.png", class:""}
};

Papa.parse(csvUrl,{
  download:true,
  skipEmptyLines:true,
  complete:function(results){
    headers=results.data[1].map(h=>h.trim());
    originalData=results.data.slice(2).filter(r=>r.length===headers.length);
    filteredData=[...originalData];
    createHeaders();
    displayRows();
    document.getElementById("prospectCount").textContent=originalData.length;
  }
});

function sortTable(col){
  const headerName=headers[col].toLowerCase();

  if(currentSort===col){
    sortAsc=!sortAsc;
  }else{
    currentSort=col;
    sortAsc = !highFirstColumns.some(h => headerName.includes(h));
  }

  filteredData.sort((a,b)=>{
    const v1=parseFloat(a[col]);
    const v2=parseFloat(b[col]);

    if(!isNaN(v1) && !isNaN(v2)){
      return sortAsc ? v1-v2 : v2-v1;
    }
    return sortAsc
      ? a[col].localeCompare(a[col])
      : b[col].localeCompare(a[col]);
  });

  document.querySelectorAll("th").forEach(th=>{
    th.classList.remove("sorted");
    th.querySelector(".arrow").textContent="";
  });

  const activeTh=document.querySelectorAll("th")[col];
  activeTh.classList.add("sorted");
  activeTh.querySelector(".arrow").textContent=sortAsc?"▲":"▼";

  displayRows();
}

function displayRows(){
  const tbody=document.querySelector("#data-table tbody");
  tbody.innerHTML="";

  filteredData.forEach(r=>{
    const tr=document.createElement("tr");

    r.forEach((c,i)=>{
      const td=document.createElement("td");

      if(headers[i].toLowerCase().includes("school") && schoolLogos[c]){
        const logo=schoolLogos[c];
        td.innerHTML=`<img src="${logo.src}" class="school-logo ${logo.class}">`;
      }else{
        td.textContent=c;
      }

      if(i===currentSort) td.classList.add("active-col");
      tr.appendChild(td);
    });

    tbody.appendChild(tr);
  });
}

function createHeaders(){
  const thead=document.querySelector("#data-table thead");
  const row=document.createElement("tr");

  headers.forEach((h,i)=>{
    const th=document.createElement("th");
    th.innerHTML=h+' <span class="arrow"></span>';
    th.addEventListener("click",()=>sortTable(i));
    row.appendChild(th);
  });

  thead.appendChild(row);
}
</script>

</body>
</html>
